# 데이터베이스 소개

## 1.배움의 전형적인 패턴

꾸준히 버텨야한다.

공부하다 막혔을 때, 자문자답 하면서 꾸준히 발전하는게 중요.

잘하는사람 보고 기죽지 말자. 비교를 하려면 어제의 나, 오늘의 나 비교 

자신이 아는것, 모르는것 을 분명히 이해하는가?!

멍청한 질문은 없다. 

배움의 발전은 정체기를 지나다가 tipping point를 만나면 급 점프 한다!

→발전이 더딘 기간을 즐기자. 

## 2. 데이터베이스가 왜 필요한가?

계정, 비밀번호, 등의 기록들을 저장해놓는 곳 →데이터베이스 

이 데이터들을 어떤 형태로 저장, 관리 할것인가? SQL이용할것

관계형 데이터 베이스

→서비스 운영에 필요한 정보를 table로 정리해놓은것. 

프로덕션 관계형 데이터 베이스

→웹서비스, 앱 운영에 필요한 정보를 저장해놓은 데이터베이스 ⇒ 빠른 처리속도가 매우 중요! 

데이터 웨어하우스 관계형 데이터베이스

→사용하는 사람들은 한 회사의 직원, 데이터의 크기가 크다.⇒ 큰 데이터를 처리하는게 중요!

백앤드⇒프로덕션 관계형 데이터베이스(MySQL, PostgreSQL)을 아는게 좋아.

## 3.백엔드 시스템 구성도

백엔드 시스템 구성에서 프로덕션 관계형 데이터베이스가 어떻게 사용되는가?

웹/앱 서비스는 크게 프론트앤드, 백엔드로 구성되어있다. 

프론트앤드 : 사용자와 인터렉션을 하는 곳. 

백엔드 : 사용자에게 보이지는 않지만 실제 데이터를 관리하는 곳.→ 다양한 데이터베이스가 사용됨.

다른 직군이 등장했다.

데브옵스(DevOps) :서비스 전반의 운영을 책임지는 곳. 작은 회사일경우 백엔드가 담당할 수도 있음.

풀스택(Full Stack): 프론트엔드 백엔드 둘다 할줄 아는 개발자. 개발의 속도를 빠르게 하고 싶거나 ,회사가 작을경우 필요로 한다.

데이터 직군: 데이터의 중요성이 올라가면서 등장. 

데이터 엔지니어 : 데이터 웨어하우스를 관리함

데이터 과학자 : 분석된 데이터를 이용해 미래를 예측, 프로세스를 최적화한다.  

데이터 분석가 : 데이터 웨어하우스를 바탕으로 다양한 지표 설정과 분석을 한다.

### 시스템 구성의 변화

- 2-Tier

시스템에 2개의 컴포넌트가 있다. (클라이언트 - 서버)

Client가 유저 인터페이스가 되고(프론트엔드), 서버가 데이터베이스가 된다.(백엔드)

- 3-Tier

→웹 서비스에서 많이 사용된다.

프레테이션 티어 : 웹 브라우저라고 보면 된다. (프론트엔드)

애플리케이션 티어 : 프레젠테이션티어와 데이터 티어 사이에 있는 미들맨.(백엔드)

데이터 티어 : 데이터가 들어있는 곳 (벡엔드)

### Spring Boot란?

백엔드 개발을 쉽게 해주는 프레임워크 (자바기반)

→Application Layer와 Data Layer의 구현을 쉽게 해준다.

### 관계형 데이터베이스는 백엔드 개발자에게 중요하다!

관계형 데이터베이스 모델을 잘 구성할 줄 알아야함. 

## 관계형 데이터베이스란?

구조화된 데이터를 저장하고 질의할 수 있게 하는 저장소.

엑셀 스프레드시트 형태로 정의,저장됨. (레코드 (행), 컬럼( 열))

테이블 저장을 위한 DDL(Data Definition Language) →테이블의 형태를 잡아줘!

⇒테이블에 어떤 컬럼이 있는가? 타입이 뭔가?

테이블 데이터 조작/질의를 위한 DML(Data Manipulation Language)→정의된 테이블의 형태에 맞춰 레코드를 추가, 변경, 다시 읽어들이기

⇒레코드의 특정 값을 바꾸거나, 바꾸거나, 삭제하거나, 다시 읽거나

### 대표적인 관계형 데이터베이스

- 프로덕션 데이터베이스 :(MySQL, PostgreSQL, Oracle)

→OLTP(Online Transaction Processing)

→ 속도 중심이다. 웹서비스, 모바일 앱 운영에 필요한 데이터가 모여있음. 

- 데이터 웨어하우스 :(RedShift, SnowFlake)

→OLAP(Online Analytical Processing)

→큰 데이터 처리가 중요함.

### 관계형 데이터베이스의 구조

관계형 데이터베이스는 2단계로 이루어져있다.

가장 밑단에는 테이블들이 존재(엑셀 시트 생각하면 됨.)

테이블들은 데이터베이스 라는 폴더 밑으로 구성되어있다.(폴더같은 컨셉)

![관계형 데이터베이스의 예시](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%E1%84%87%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%89%E1%85%A9%E1%84%80%E1%85%A2%200c4cda9ebf0f44b99ec01041deee3c9e/Untitled.png)

관계형 데이터베이스의 예시

적당히 테이블의 속성을 보고 이름을 주면 된다.

![varchar(32) = 스트링이다. 길이 32의. 테이블 스키마 : 테이블의 구조.](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%E1%84%87%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%89%E1%85%A9%E1%84%80%E1%85%A2%200c4cda9ebf0f44b99ec01041deee3c9e/Untitled%201.png)

varchar(32) = 스트링이다. 길이 32의. 테이블 스키마 : 테이블의 구조.

테이블의 스키마를 먼저 정의한다. (테이블 자체의 format을 잡아준다.)

테이블 스키마를 잡는 SQL → DDL

데이터 변경, 추가, 다시 읽기 →DML

테이블은 레코드(행)으로 구성되어있다. 

각각 레코드들은 필드(열)을 가지고 있다. 

Primary Key : 테이블의 어떤 레코드를 유일하게 지칭해줄 수 있는 컬럼(주민등록번호의 예) 

한국인이면 주민등록번호로 한사람씩 지칭해줄 수 있으니까! (겹치는경우는 primary key가 될 수 없죠)

## SQL 소개

SQL : Structured Query Language

관계형 데이터베이스에 있는 데이터를 읽어들이거나 조작하는 언어

DDL 과 DML로 이루어짐.

SQL은 빅데이터 세상에서도 중요하다! 대용량 데이터 웨어하우스에서 SQL을 지원한다.

SQL단점 : 

→구조화된 데이터를 다루는데 최적화되어있기 때문에, ‘비구조화’된 데이터를 사용하기 어렵다. (Image, video, text같은거)

→field속에 field 속에 field처럼 nested된 구조의 데이터는 다루기 어렵다.

### Star Schema

데이터를 다양한 형태의 테이블로 나누는것. 

![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%E1%84%87%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%89%E1%85%A9%E1%84%80%E1%85%A2%200c4cda9ebf0f44b99ec01041deee3c9e/Untitled%202.png)

다양한 부 테이블들 Join해서, 매출이라는 큰 테이블을 만드는것.

장점

→데이터의 반복이 없기때문에 Storage 낭비가 덜하다.

→업데이트가 쉽다.

단점

테이블 join과정이 시간과 resources 쓰기 때문에 시간이 걸린다.

### Denormalized Schema

NoSQL이나, 데이터 웨어하우스에서 사용된다. 

테이블 하나에 다 집어넣어서 join안해도 되게끔!

![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%E1%84%87%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%89%E1%85%A9%E1%84%80%E1%85%A2%200c4cda9ebf0f44b99ec01041deee3c9e/Untitled%203.png)

단점 : Storage낭비가 있다.

장점 : Join이 필요 없어서, 빠른 계산이 가능하다.

## SQL기본

- 다수의 SQL문 을 쓸때는 ; 로 구분한다.
- 팀 단위로 사용할 때는 내부 규칙을 정하는게 좋다.(Camel Case쓸것인가 _ 쓸것인가 이런거)
- — 를 이용해서 주석을 달 수 있다.

### SQL DDL

테이블의 구조를 정의해주는 언어

CREATE TABLE이라는 문장을 가지고 table을 정의할 수 있다. 

(Table의 이름, Table안에 들어가는 다양한 형태의 Field(이름, type)을 정의 가능)

![primary key도 지정해 줄 수 있다.](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%E1%84%87%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%89%E1%85%A9%E1%84%80%E1%85%A2%200c4cda9ebf0f44b99ec01041deee3c9e/Untitled%204.png)

primary key도 지정해 줄 수 있다.

raw_data.user_seeion_channel → raw_data라는 폴더에 user_session_channel이라는 테이블을 만든다.

다음, 라인마다 column의 이름을 지정해준다. 

DROP TABLE

- DROP TABLE table_name 이렇게 하면 table_name이라는 테이블이 사라진다.
테이블 이름이 없으면 에러가 나오기 때문에 DROP TABLE IF EXIST table_name 이라고 씀
- DROP TABLE vs DELETE FROM
DELETE FROM →테이블을 없애는게 아닌 일부 레코드만 없애는거.
- ALTER TABLE table_name ADD COLUMN field_name field_type →새로운 컬럼 추가
- ALTER TABLE table_name RENAME current_field_name to new_field→ 필드 이름바꾸기
- 등등이 있다…

## SQL DML - 테이블 데이터 조작언어

레코드 질의 언어 : SELECT

- SELECT FROM: 테이블에서 레코드와 필드를 읽어온다.
- WHERE : 레코드 선택조건 설정
- INSERT INTO : 테이블에 레코드를 추가
- UDATE FROM: 테이블 레코드의 필드값을 변경